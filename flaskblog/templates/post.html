{% extends "layout.html" %}  <!-- 繼承 layout.html 模板，重用主框架結構和樣式 -->
{% block content %}  <!-- 定義 content 區塊，將具體內容填充到 layout.html 中的指定位置 -->
  <article class="media content-section">  <!-- 定義一篇文章的結構，使用 media 類型提供清晰的佈局 -->
    <img class="rounded-circle article-img" src="{{ url_for('static', filename='profile_pics/' + post.author.image_file) }}">  
    <!-- 顯示文章作者的頭像，從靜態資源文件夾中加載圖片，並設置為圓形 -->
    <div class="media-body">  <!-- 文章內容區域 -->
      <div class="article-metadata">  <!-- 文章的元數據，包括作者和發布日期 -->
        <a class="mr-2" href="{{ url_for('user_posts', username=post.author.username) }}">{{ post.author.username }}</a>  
        <!-- 顯示作者的用戶名，並設置鏈接到該作者的所有文章頁面 -->
        <small class="text-muted">{{ post.date_posted.strftime('%Y-%m-%d') }}</small>  
        <!-- 顯示文章的發布日期，格式化為 'YYYY-MM-DD' -->
        {% if post.author == current_user %}  <!-- 如果當前用戶是文章的作者，顯示編輯和刪除選項 -->
          <div>
            <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{{ url_for('update_post', post_id=post.id) }}">Update</a>  
            <!-- 更新文章的按鈕，鏈接到更新文章的路由 -->
            <button type="button" class="btn btn-danger btn-sm m-1" data-toggle="modal" data-target="#deleteModal">Delete</button>  
            <!-- 顯示刪除按鈕，點擊時觸發刪除確認模態框 -->
          </div>
        {% endif %}  <!-- 結束條件判斷 -->
      </div>
      <h2 class="article-title">{{ post.title }}</h2>  <!-- 顯示文章標題 -->
      <p class="article-content">{{ post.content }}</p>  <!-- 顯示文章內容 -->
    </div>
  </article>
  <!-- 定義刪除確認模態框 -->
  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">  
    <!-- 模態框初始狀態為隱藏，使用 Bootstrap 提供的 "fade" 效果 -->
    <div class="modal-dialog" role="document">  <!-- 模態框的對話框 -->
      <div class="modal-content">  <!-- 模態框的內容部分 -->
        <div class="modal-header">  <!-- 模態框的標題部分 -->
          <h5 class="modal-title" id="deleteModalLabel">Delete Post?</h5>  <!-- 顯示刪除確認標題 -->
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">  
          <!-- 提供關閉模態框的按鈕 -->
            <span aria-hidden="true">&times;</span>  <!-- 顯示 "×" 作為關閉符號 -->
          </button>
        </div>
        <div class="modal-footer">  <!-- 模態框的底部部分 -->
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>  
          <!-- 關閉模態框的按鈕 -->
          <form action="{{ url_for('delete_post', post_id=post.id) }}" method="POST">  
          <!-- 定義表單，通過 POST 方法提交到刪除文章的路由 -->
            <input class="btn btn-danger" type="submit" value="Delete">  
            <!-- 提交刪除請求的按鈕，設置為紅色 -->
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}  <!-- 結束 content 區塊 -->
